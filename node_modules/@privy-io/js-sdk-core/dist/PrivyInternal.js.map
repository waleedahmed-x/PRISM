{"version":3,"file":"PrivyInternal.js","sources":["../src/PrivyInternal.ts"],"sourcesContent":[null],"names":["CLIENT_ANALYTICS_ID_KEY","PrivyInternal","baseUrl","_config","appId","appClientId","_storage","_analyticsId","_sdkVersion","_fetch","nativeAppIdentifier","callbacks","_cache","Map","session","constructor","o","this","storage","_getOrGenerateClientAnalyticsId","sdkVersion","document","Session","isUsingServerCookies","rfetch","fetch","retries","retryDelay","isReady","Boolean","config","caid","_initialize","getAppConfig","custom_api_url","setIsReady","createAnalyticsEvent","r","body","params","headers","options","onRequest","_beforeRequest","bind","url","getPathWithParams","path","request","Request","method","JSON","stringify","requestInit","res","json","status","PrivyApiError","_beforeRequestWithoutInitialize","token","getToken","Headers","set","signal","toAbortSignalTimeout","credentials","beforeRequestWithoutRefresh","getAccessToken","AppConfig","app_id","clientAnalyticsId","get","length","e","console","error","uuid","put","destroyClientAnalyticsId","del","name","properties","AnalyticsEvent","event_name","client_id","payload","refreshSession","refreshToken","getRefreshToken","undefined","key","cached","promise","_refreshSession","delete","hasRefreshCredentials","Error","session_update_action","RefreshSession","refresh_token","setUser","user","Promise","all","storeToken","storeRefreshToken","storeIdentityToken","identity_token","destroyLocalState","code","PrivyErrorCode","MISSING_OR_INVALID_TOKEN","message","tokenIsActive","getIdentityToken"],"mappings":"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"}