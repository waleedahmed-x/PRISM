{"version":3,"file":"EmbeddedWalletProxy.js","sources":["../../src/embedded/EmbeddedWalletProxy.ts"],"sourcesContent":[null],"names":["DEFAULT_WALLET_PROXY_TIMEOUT_MS","isErrorResponseEvent","event","undefined","error","uniqueId","id","replacer","_key","value","toString","sleep","ms","Promise","resolve","setTimeout","withTimeout","promise","msg","race","_","reject","Error","EVENT_CALLBACK_QUEUE","EventCallbacksQueue","EmbeddedWalletProxy","ready","cache","_embeddedWalletMessagePoster","constructor","embeddedWalletMessagePoster","this","Map","ping","timeoutMs","invoke","create","data","waitForReady","then","connect","recover","setRecovery","rpc","createSolana","connectSolana","recoverSolana","solanaRpc","handleEmbeddedWalletMessages","readyCallbacks","dequeue","PrivyIframeError","type","message","createCallbacks","connectCallbacks","recoverCallbacks","rpcCallbacks","cb","createSolanaCallbacks","connectSolanaCallbacks","recoverSolanaCallbacks","rpcSolanaCallbacks","async","catch","key","JSON","stringify","serialize","cached","get","res","eventId","enqueue","postMessage","finally","delete","set"],"mappings":"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"}